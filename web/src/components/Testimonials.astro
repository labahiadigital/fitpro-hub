---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const testimonials = [
  {
    name: t('testimonials.1.name'),
    role: t('testimonials.1.role'),
    content: t('testimonials.1.quote'),
    rating: 5,
    company: 'FitPro Studio',
  },
  {
    name: t('testimonials.2.name'),
    role: t('testimonials.2.role'),
    content: t('testimonials.2.quote'),
    rating: 5,
    company: 'NutriSport',
  },
  {
    name: t('testimonials.3.name'),
    role: t('testimonials.3.role'),
    content: t('testimonials.3.quote'),
    rating: 5,
    company: 'CrossFit BCN',
  },
];
---

<section id="testimonials" class="section section-alt">
  <div class="container">
    <div class="section-header">
      <span class="badge">{t('testimonials.badge')}</span>
      <h2 class="section-title">{t('testimonials.title')}</h2>
      <p class="section-subtitle">{t('testimonials.subtitle')}</p>
    </div>
    
    <div class="testimonials-grid">
      {testimonials.map(testimonial => (
        <div class="testimonial-card card">
          <div class="testimonial-rating">
            {Array.from({ length: testimonial.rating }).map(() => (
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="var(--color-accent)" stroke="var(--color-accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            ))}
          </div>
          
          <blockquote class="testimonial-content">
            "{testimonial.content}"
          </blockquote>
          
          <div class="testimonial-author">
            <div class="author-avatar">
              {testimonial.name.charAt(0)}
            </div>
            <div class="author-info">
              <span class="author-name">{testimonial.name}</span>
              <span class="author-role">{testimonial.role} Â· {testimonial.company}</span>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .section-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin-bottom: 4rem;
  }
  
  .section-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-top: 1rem;
  }
  
  .section-subtitle {
    color: var(--color-text-muted);
    font-size: 1.125rem;
    max-width: 600px;
    margin-top: 1rem;
  }
  
  .testimonials-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }
  
  @media (max-width: 1024px) {
    .testimonials-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  @media (max-width: 640px) {
    .testimonials-grid {
      grid-template-columns: 1fr;
    }
  }
  
  .testimonial-card {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .testimonial-card:hover {
    transform: translateY(-4px);
  }
  
  .testimonial-rating {
    display: flex;
    gap: 0.25rem;
  }
  
  .testimonial-content {
    color: rgba(255, 255, 255, 0.8);
    font-style: italic;
    line-height: 1.7;
    flex: 1;
  }
  
  .testimonial-author {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-top: auto;
  }
  
  .author-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    color: var(--color-background);
    font-size: 1.125rem;
  }
  
  .author-info {
    display: flex;
    flex-direction: column;
  }
  
  .author-name {
    font-weight: 600;
    font-size: 0.875rem;
  }
  
  .author-role {
    color: var(--color-text-muted);
    font-size: 0.75rem;
  }
</style>
